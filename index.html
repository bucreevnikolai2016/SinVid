<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="contact form example">
<meta http-equiv="cache-control" content="max-age=0"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
<meta http-equiv="pragma" content="no-cache"/>
<title>СинВид</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
body {
background-color: #000000;
}
.vid {
z-index: 0;
position: absolute;
width: 500px;
height: 281.25px;
left: 0px;
top: 0px;
}
.json {
position: absolute;
display : none;
}
.myButton1 {
z-index: 90;
position: absolute;
left: 10px;
top: 10px;
width: 30px;
height: 30px;
background-color: #2F4F4F;
border: none;
color: white; 
font-size: 19px;
cursor: pointer;
}
.myButton2 {
z-index: 90;
position: absolute;
left: 50px;
top: 10px;
width: 30px;
height: 30px;
background-color: #2F4F4F;
border: none;
color: white; 
font-size: 19px;
cursor: pointer;
}
.slidecontainer {
z-index: 90;
position: absolute;
left: 90px;
top: 15px;
}
.slider {
z-index: 90;
width: 70px;
}
.slidecontainer2 {
z-index: 90;
position: absolute;
left: 170px;
top: 15px;
}
.slider2 {
z-index: 90;
width: 300px;
}
</style>  	
	
</head>
	
<body>

<button class="myButton1" id="myButton1" type="button"><i class="fa fa-play" aria-hidden="true"></i></button>  
<button class="myButton2" id="myButton2" type="button"><i class="fa fa-pause" aria-hidden="true"></i></button>  
<div class="slidecontainer" id="slidecontainer">
  <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
  <p id="pp" style="display: none">Volume: <span id="demo" style="display: none"></span></p>
</div>
<div class="slidecontainer2" id="slidecontainer2">
  <input type="range" min="0" max="" value="0" class="slider2" id="myRange2">
  <p id="pp2" style="display: none">Volume: <span id="demo2" style="display: none"></span></p>
</div>

<video class="vid" id="vid" controls>
  <source src="http://stream.voidboost.cc/8/4/0/5/9/d3a04dc521b7401d0dfe445f476a6618:2022070722:NXJyZThLbFNyODdvRmpZck0wamVVUmZpR3ZPelM4d3NJMUFHc29DT2JiOEN1eG9LdThWbWZIdStvNzMyTmZ3ZUhPTFRFU2p4WEZ0MVFhSGg0aWhVb2ZGQm51Tkk2K05oeGp6dnRHeDNKdjA9/dviae.mp4" />
</video> 

<div style="display: none" class="json" id="json">json here</div>

<input id="otpravka" style="display: none" name="otpravka" value=""/>   
<input id="emylast" style="display: none" name="emylast" value=""/>
<input id="timeotp" style="display: none" name="timeotp" value="0"/>  
<input id="per" style="display: none" name="per" value="0"/> 
<input id="pertime" style="display: none" name="pertime" value="0"/> 
<input id="sinh" style="display: none" name="sinh" value="0"/> 
<input id="massiv" style="display: none" name="massiv" value=""/> 
<input id="block" style="display: none" name="block" value=""/> 
<input id="play" style="display: none" name="play" value=""/> 

<script>
var slider = document.getElementById("myRange");
var output = document.getElementById("demo");
output.innerHTML = slider.value;
slider.oninput = function() {
output.innerHTML = this.value;
}
</script>

<script>
var slider2 = document.getElementById("myRange2");
var output2 = document.getElementById("demo2");
output2.innerHTML = slider2.value;
slider2.oninput = function() {
output2.innerHTML = this.value;
}
</script>

<script type="text/javascript">
setInterval(function() {
if (document.getElementById("demo")) {
var input = document.getElementById("demo");
var text = input.innerHTML;
var v1 = text / 100;
vid.volume = v1; 
} 
}, 300);

</script> 
<script type="text/javascript">
setInterval(function() {
if (document.getElementById("demo2")) {
document.getElementById('myRange2').max = vid.duration;
var input = document.getElementById("demo2");
var text = input.innerHTML;
} 
}, 300);
</script> 

<script type="text/javascript">
document.querySelector('#myButton1').addEventListener('click', function(){
document.getElementById('play').value = '1';
});
</script>
<script type="text/javascript">
document.querySelector('#myButton2').addEventListener('click', function(){
document.getElementById('play').value = '0';
});
</script>
	
<script type="text/javascript">
    setInterval(function() { 
       var id = '1phPekCXWUAwnmWYzdmt0llykr0KR64rgXdWnx7mOLSw';
var gid = '0';
var url = 'https://docs.google.com/spreadsheets/d/'+id+'/gviz/tq?tqx=out:json&tq&gid='+gid;
fetch(url)
  .then(response => response.text())
  .then(data => document.getElementById("json").innerHTML=myItems(data.slice(47, -2))  
  );
function myItems(jsonString){
  var json = JSON.parse(jsonString);
  var table = '<table><tr>'
  json.table.cols.forEach(colonne => table += '<th>' + colonne.label + '</th>')
  table += '</tr>'
  json.table.rows.forEach(ligne => {
    table += '<tr>'
    ligne.c.forEach(cellule => {
        try{var valeur = cellule.f ? cellule.f : cellule.v}
        catch(e){var valeur = ''}
        table += '<td>' + valeur + '</td>'
      }
    )
    table += '</tr>'
    }
  )
  table += '</table>'
  return table
}
      }, 1000);
    </script> 

<script type="text/javascript">
  setInterval(function() {
if (document.getElementById("json")) {
var p1 = json.firstElementChild;
var p2 = p1.firstElementChild;
var p3 = p2.lastElementChild;
var p4 = p3.lastElementChild;
var p5 = p4.innerHTML;
var p6 = p4.previousElementSibling;
var p9 = p6.innerHTML;
var p12 = p3.previousElementSibling;
var p13 = p12.lastElementChild;
var p14 = p13.innerHTML;
var p15 = p13.previousElementSibling;
var p16 = p15.innerHTML;
var p17 = p6.previousElementSibling;
var p18 = p17.innerHTML;	
var p19 = document.getElementById('block').value;
if (p19 != p18) {
  if (p5 == 0) {
  vid.pause();
  vid.currentTime = p9;
  document.getElementById("demo2").innerHTML = p9;
  document.getElementById('block').value = p18;
  } 
  if (p5 == 1) {
  vid.play();
  vid.currentTime = p9;
  document.getElementById("demo2").innerHTML = p9;
  document.getElementById('block').value = p18;
  }
}
}
          }, 10);
    </script> 
	
<script type="text/javascript"> 
setInterval(function() { 
function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
async function delayedGreeting() {
  var input = document.getElementById("demo2");
  var text = input.innerHTML;
  var t1 = text;
  await sleep(50);
  var input = document.getElementById("demo2");
  var text = input.innerHTML;
  var t2 = text;
  var t3 = t1 - t2;
  var t4 = Math.abs(t3);
  var t5 = document.getElementById('pertime').value;
  if (t4 > 5 & t5 == 0) {document.getElementById('per').value = '1';};
}
delayedGreeting();
}, 50);
</script> 	
	
<script type="text/javascript">
setInterval(function() {
document.getElementById('sinh').value = '1';
}, 60000);
</script>
	
<script type="text/javascript">
setTimeout(() => { fetch("https://script.google.com/macros/s/AKfycbzMZJGEC1l3GD2O-EHEviGWe_JpH37OzxVuSiT6SsWOusdzpkQ/exec"+ "?" + "p3=1", { method: "GET", headers:{"content-type":"application/x-www-form-urlencoded"} }) }, 1500);
setInterval(function() { 
var p1 = json.firstElementChild;
var p2 = p1.firstElementChild;
var p3 = p2.lastElementChild;
var p4 = p3.lastElementChild;
var p6 = p4.previousElementSibling;
var p17 = p6.previousElementSibling;
var p18 = p17.innerHTML;
var date = new Date();
var ch = date.getHours() * 60 * 60 * 1000;
var min = date.getMinutes() * 60 * 1000;
var sec = date.getSeconds() * 1000;
var milsec = date.getMilliseconds();
var vrem = ch + min + sec + milsec;
var input = document.getElementById("demo2");
var text = input.innerHTML;	
var t7 = text;
var t8 = document.getElementById('emylast').value;
if (document.getElementById('timeotp').value == 0 & document.getElementById('massiv').value == 1) {
var ottp = '1';
}
if (document.getElementById('timeotp').value == 0 & document.getElementById('massiv').value == 0) {
var ottp = '0';
}
if (document.getElementById('play').value == 1) {
var t6 = '1';
} 
if (document.getElementById('play').value == 0) {
var t6 = '0';
}
if (t8 == t6) {
if (document.getElementById('otpravka').value == 1) {
document.getElementById('otpravka').value = '0';
} else {
}
} 
if (t8 != t6 || document.getElementById('per').value == 1 || document.getElementById('sinh').value == 1 || ottp == 1) {
if (document.getElementById('otpravka').value == 1) {
} else {
if (document.getElementById('timeotp').value == 0) {
fetch("https://script.google.com/macros/s/AKfycbzMZJGEC1l3GD2O-EHEviGWe_JpH37OzxVuSiT6SsWOusdzpkQ/exec"+ "?" + "p1=" + t7 + "&p2=" + t6 + "&p4=" + vrem,
    { 
	method: "GET", 
	headers:{"content-type":"application/x-www-form-urlencoded"} 
	})
document.getElementById('timeotp').value = '1';
setTimeout(() => { document.getElementById('timeotp').value = '0';}, 1500);
document.getElementById('massiv').value = '0';
} else {
document.getElementById('massiv').value = '1';
}
document.getElementById('otpravka').value = '1';
document.getElementById('emylast').value = t6;
document.getElementById('pertime').value = '1';
document.getElementById('per').value = '0';
document.getElementById('sinh').value = '0';
setTimeout(() => { document.getElementById('pertime').value = '0'; }, 50);
}
}
}, 10);
</script>

</body>	
	
</html>
